<?xml version="1.0" encoding="utf-8" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head> <title>PUGHReduce</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<!-- mathjax,charset=utf-8,html,xhtml --> 
<meta name="src" content="documentation.tex" /> 
<link rel="stylesheet" type="text/css" href="documentation.css" /> 
<script>window.MathJax = { tex: { tags: "ams", }, }; </script> 
 <script type="text/javascript" async="async" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"></script>  
</head><body 
>
<div class="maketitle">
                                                                                       
                                                                                       
                                                                                       
                                                                                       

<h2 class="titleHead">PUGHReduce</h2>
 <div class="author" ><span 
class="cmr-12">Gabrielle Allen, Thomas Radke</span></div>
<br />
<div class="date" >\( \)<span 
class="cmr-12">Date</span>\( \)</div>
</div>
<div 
class="abstract" 
>
<h3 class="abstracttitle">
<span 
class="cmbx-9">Abstract</span>
</h3>
     <!--l. 20--><p class="noindent" ><span 
class="cmr-9">Reductions operations which are performed using the PUGH driver</span>
</p>
</div>
<h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-10001"></a>Purpose</h3>
<!--l. 26--><p class="noindent" >This thorn registers a number of reduction operators with the flesh. The reductions are performed
using internals of the PUGH driver, so that this thorn can only be used when <span 
class="cmtt-10">CactusPUGH/PUGH </span>is
active.<br 
class="newline" />
</p><!--l. 30--><p class="noindent" >The reduction operations this thorn registers are<br 
class="newline" />
</p>
                                                                                       
                                                                                       
<div class="tabular"> <table id="TBL-2" class="tabular" 
 
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1" /></colgroup><colgroup id="TBL-2-2g"><col 
id="TBL-2-2" /></colgroup><colgroup id="TBL-2-3g"><col 
id="TBL-2-3" /></colgroup><tr 
class="hline"><td><hr /></td><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-1"  
class="td11"> Reduction Operator   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-2"  
class="td11"> Calculates                                             </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-3"  
class="td11"> By  </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-1"  
class="td11"> <span 
class="cmtt-10">average</span>\(^*\)<span 
class="cmtt-10">, mean</span>\(^*\)      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-2"  
class="td11"> the average/mean of a grid variable            </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-3"  
class="td11"> \( \sum { GV }/N \)   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-1"  
class="td11"> <span 
class="cmtt-10">count              </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-2"  
class="td11"> the number of grid points in a grid variable  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-3"  
class="td11"> \( N \)   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-1"  
class="td11"> <span 
class="cmtt-10">maximum</span>\(^*\)            </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-2"  
class="td11"> the maximum of a grid variable                 </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-3"  
class="td11"> \( \max { GV } \)   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-5-1"  
class="td11"> <span 
class="cmtt-10">minimum</span>\(^*\)            </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-5-2"  
class="td11"> the minimum of a grid variable                  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-5-3"  
class="td11"> \( \min { GV } \)   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-6-1"  
class="td11"> <span 
class="cmtt-10">norm1, L1Norm      </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-6-2"  
class="td11"> the L1 norm of a grid variable                   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-6-3"  
class="td11"> \( \left (\Sigma |GV| \right )/N \)   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-7-1"  
class="td11"> <span 
class="cmtt-10">norm2, L2Norm      </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-7-2"  
class="td11"> the L2 norm of a grid variable                   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-7-3"  
class="td11"> \( \sqrt [2]{(\Sigma |GV|^2)/N} \)   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-8-1"  
class="td11"> <span 
class="cmtt-10">norm3, L3Norm      </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-8-2"  
class="td11"> the L3 norm of a grid variable                   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-8-3"  
class="td11"> \( \sqrt [3]{(\Sigma |GV|^3)/N} \)   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-9-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-9-1"  
class="td11"> <span 
class="cmtt-10">norm4, L4Norm      </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-9-2"  
class="td11"> the L4 norm of a grid variable                   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-9-3"  
class="td11"> \( \sqrt [4]{(\Sigma |GV|^4)/N} \)   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-10-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-10-1"  
class="td11"> <span 
class="cmtt-10">norm</span><span 
class="cmtt-10">_inf, LinfNorm </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-10-2"  
class="td11"> the Infinitity norm of a grid variable           </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-10-3"  
class="td11"> \( \max {| GV |} \)   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-11-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-11-1"  
class="td11"> <span 
class="cmtt-10">sum</span>\(^*\)                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-11-2"  
class="td11"> the sum of the elements of a grid variable    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-11-3"  
class="td11"> \( \sum { GV } \)   </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-12-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-12-1"  
class="td11">                    </td>
</tr></table>                                                                                       </div><br 
class="newline" />
<!--l. 49--><p class="noindent" >Reduction operators with multiple names are just synonyms for the same kind of reduction operation. In the
formulas \(GV\) is the grid variable to be reduced, and \(N\) denotes the number of its elements. Reduction operators
marked with \(^*\) cannot be applied to grid variables of complex datatype.
</p>
<h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-20002"></a>Examples</h3>
<!--l. 58--><p class="noindent" >The following C example illustrates how the get the maximum value of a grid function.
                                                                                       
                                                                                       
</p>
<pre class="verbatim" id="verbatim-1">
  int vindex;             /* grid variable index */
  CCTK_REAL result;       /* resulting reduction value */
  int target_proc;        /* processor to hold the result */
  int reduction_handle;   /* handle for reduction operator */
  char *reduction_name;   /* reduction operator to use */


  /* want to get the maximum for the wavetoy grid function */
  reduction_name = &#x0022;maximum&#x0022;;
  vindex = CCTK_VarIndex (&#x0022;wavetoy::phi&#x0022;);

  /* the reduction result will be obtained by processor 0 only */
  target_proc = 0;

  /* get the handle for the given reduction operator */
  reduction_handle = CCTK_ReductionHandle (reduction_name);
  if (reduction_handle &#x003E;= 0)
  {
    /* now do the reduction using the flesh’s generic reduction API
      (passing in one input, expecting one output value of REAL type) */
    if (CCTK_Reduce (cctkGH, target_proc, reduction_handle,
                     1, CCTK_VARIABLE_REAL, &#x0026;result, 1, vindex) == 0)
    {
      if (CCTK_MyProc (cctkGH) == target_proc)
      {
        printf (&#x0022;%s reduction value is %f\n&#x0022;, reduction_name, result);
      }
    }
    else
    {
      CCTK_VWarn (1, __LINE__, __FILE__, CCTK_THORNSTRING,
                  &#x0022;%s reduction failed&#x0022;, reduction_name);
    }
  }
  else
  {
    CCTK_VWarn (1, __LINE__, __FILE__, CCTK_THORNSTRING,
                &#x0022;Invalid reduction operator ’%s’&#x0022;, reduction_name);
  }
</pre>
<!--l. 101--><p class="nopar" >
                                                                                       
                                                                                       
</p><!--l. 108--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-30003"></a>Parameters</h3>
<!--l. 114--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-40004"></a>Interfaces</h3>
<!--l. 119--><p class="noindent" >
</p>
<h4 class="likesubsectionHead"><a 
 id="x1-5000"></a>General</h4>
<!--l. 121--><p class="noindent" ><span 
class="cmbx-10">Implements</span>:
</p><!--l. 123--><p class="noindent" >reduce
</p><!--l. 128--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-60005"></a>Schedule</h3>
<!--l. 134--><p class="noindent" >This section lists all the variables which are assigned storage by thorn CactusPUGH/PUGHReduce. Storage can
either last for the duration of the run (<span 
class="cmbx-10">Always </span>means that if this thorn is activated storage will
be assigned, <span 
class="cmbx-10">Conditional </span>means that if this thorn is activated storage will be assigned for the
duration of the run if some condition is met), or can be turned on for the duration of a schedule
function.
</p><!--l. 137--><p class="noindent" >
</p>
<h4 class="likesubsectionHead"><a 
 id="x1-7000"></a>Storage</h4>
<!--l. 137--><p class="noindent" >NONE
</p>
<h4 class="likesubsectionHead"><a 
 id="x1-8000"></a>Scheduled Functions</h4>
<!--l. 141--><p class="noindent" ><span 
class="cmbx-10">CCTK</span><span 
class="cmbx-10">_STARTUP</span>
</p><!--l. 143--><p class="noindent" >      pughreduce_startup
</p><!--l. 145--><p class="noindent" >     <span 
class="cmti-10">startup routine</span>
</p><!--l. 148--><p class="noindent" > 
</p><!--l. 150--><p class="noindent" ></p> <table id="TBL-3" class="tabular" 
 
><colgroup id="TBL-3-1g"><col 
id="TBL-3-1" /><col 
id="TBL-3-2" /><col 
id="TBL-3-3" /></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-3-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-3-1-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-2"  
class="td11"> Language:  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-3"  
class="td11"> c           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-3-2-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-2"  
class="td11"> Type:        </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-3"  
class="td11"> function  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-3-3-1"  
class="td11">    </td></tr></table>
                                                                                       
                                                                                       
 
</body></html> 

                                                                                       


