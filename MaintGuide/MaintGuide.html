<?xml version="1.0" encoding="utf-8" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head> <title></title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<!-- mathjax,charset=utf-8,html,xhtml --> 
<meta name="src" content="MaintGuide.tex" /> 
<link rel="stylesheet" type="text/css" href="MaintGuide.css" /> 
<script>window.MathJax = { tex: { tags: "ams", }, }; </script> 
 <script type="text/javascript" async="async" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"></script>  
</head><body 
>
<div class="center" 
>
<!--l. 57--><p class="noindent" >
</p><!--l. 57--><p class="noindent" ><span 
class="cmr-17x-x-143">Cactus 4.18</span><br />
<span 
class="cmr-17x-x-143">Maintainers’ Guide DRAFT VERSION</span>
</p><!--l. 57--><p class="noindent" ><img 
src="bincactus2.png" alt="PIC"  
width="142" />
</p><!--l. 57--><p class="noindent" >commit 7081ec6a0b60a9fe9abdf72b1916e9d843d4b2b4<br />
Documentation compiled on: January 22, 2026</p></div>
<!--l. 77--><p class="noindent" >
                                                                                       
                                                                                       
                                                                                       
                                                                                       
</p><!--l. 14--><p class="noindent" ><span 
class="cmbx-12">Preface</span> <a 
 id="x1-1doc"></a>
</p><!--l. 19--><p class="noindent" >This document should describe the Cactus flesh. In particular it should describe
</p>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 24--><p class="noindent" >The philosophy of the flesh
     </p></li>
     <li class="itemize">
     <!--l. 26--><p class="noindent" >The coding style used
     </p></li>
     <li class="itemize">
     <!--l. 28--><p class="noindent" >The make system
     </p></li>
     <li class="itemize">
     <!--l. 30--><p class="noindent" >The various source directories and all their files
     </p></li>
     <li class="itemize">
     <!--l. 32--><p class="noindent" >The perl scripts</p></li></ul>
<!--l. 35--><p class="noindent" >In addition it should contain ideas for future enhancements.
</p><!--l. 39--><p class="noindent" ><span 
class="cmbx-10">Overview of documentation</span>
</p><!--l. 43--><p class="noindent" >This guide covers the following topics
                  </p><dl class="list1"><dt class="list">
<span 
class="cmbx-10">Part A: Philosphy and Style.</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 47--><p class="noindent" >The philosophy behind the flesh and the coding style used.
                  </p></dd><dt class="list">
<span 
class="cmbx-10">Part B: The Make System.</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 50--><p class="noindent" >The nitty-gritty of the make system.
                  </p></dd><dt class="list">
<span 
class="cmbx-10">Part C: The CST.</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 53--><p class="noindent" >The nitty-gritty of the CST.
                  </p></dd><dt class="list">
<span 
class="cmbx-10">Part D: General.</span>  </dt><dd 
class="list">
                  <!--l. 56--><p class="noindent" >General miscellaneous things used all over the flesh.
                                                                                       
                                                                                       
                  </p></dd><dt class="list">
<span 
class="cmbx-10">Part E: Main.</span>     </dt><dd 
class="list">
                  <!--l. 59--><p class="noindent" >Everything you never wanted to know about the files in the Main subdirectory of
                  the flesh.
                  </p></dd><dt class="list">
<span 
class="cmbx-10">Part F: Comm.</span>   </dt><dd 
class="list">
                  <!--l. 63--><p class="noindent" >Everything you never wanted to know about the files in the Comm subdirectory of
                  the flesh.
                  </p></dd><dt class="list">
<span 
class="cmbx-10">Part G: IO.</span>       </dt><dd 
class="list">
                  <!--l. 67--><p class="noindent" >Everything you never wanted to know about the files in the IO subdirectory of the
                  flesh.
                  </p></dd><dt class="list">
<span 
class="cmbx-10">Part H: Util.</span>      </dt><dd 
class="list">
                  <!--l. 71--><p class="noindent" >Everything you never wanted to know about the various utility files.
                  </p></dd><dt class="list">
<span 
class="cmbx-10">Part I: Schedule.</span>  </dt><dd 
class="list">
                  <!--l. 75--><p class="noindent" >Everything you never wanted to know about the Schedule system.
                  </p></dd><dt class="list">
<span 
class="cmbx-10">Part J: Appendices.</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 78--><p class="noindent" >I’m sure we’ll need something here.
</p>
                  </dd></dl>
<!--l. 83--><p class="noindent" >Other topics to be discussed in separate documents include:
                  </p><dl class="list1"><dt class="list">
<span 
class="cmbx-10">Computational Thorn Guide</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 87--><p class="noindent" >This will contain details about the arrangements and thorns making up the standard
                  Cactus Computation Tool Kit
                  </p></dd><dt class="list">
<span 
class="cmbx-10">Relativity Thorn Guide</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 90--><p class="noindent" >This will contain details about the arrangements and thorns making up the Cactus
                  Relativity Tool Kit, one of the major motivators, and still the driving force, for the
                  Cactus Code.
                  </p></dd><dt class="list">
<span 
class="cmbx-10">Users’ Guide</span>      </dt><dd 
class="list">
                  <!--l. 93--><p class="noindent" >The stuff users need to know. This in particular documents the functions the flesh
                  needs to make available to the thorns.
</p>
                  </dd></dl>
                                                                                       
                                                                                       
<!--l. 101--><p class="noindent" ><span 
class="cmbx-10">Typographical Conventions</span>
                  </p><dl class="list1"><dt class="list">
<span 
class="cmtt-10">Typewriter</span>        </dt><dd 
class="list">
                  <!--l. 105--><p class="noindent" >Is currently used for everything you type, for program names, and code extracts.
                  </p></dd><dt class="list">
<span 
class="cmtt-10">&#x003C; ... &#x003E;</span>           </dt><dd 
class="list">
                  <!--l. 107--><p class="noindent" >Indicates a compulsory argument.
                  </p></dd><dt class="list">
<span 
class="cmtt-10">[ ... ]</span>           </dt><dd 
class="list">
                  <!--l. 108--><p class="noindent" >Indicates an optional argument.
</p>
                  </dd></dl>
<!--l. 114--><p class="noindent" ><span 
class="cmbx-10">How to Contact Us</span>
</p><!--l. 118--><p class="noindent" >Please let us know of any errors or omissions in this guide, as well as suggestions for future editions. These can
be reported via <span 
class="cmtt-10">cactusmaint@cactuscode.org</span>.
</p><!--l. 124--><p class="noindent" ><span 
class="cmbx-10">Acknowledgements</span>
</p><!--l. 128--><p class="noindent" >Hearty thanks to all those who have helped with documentation for the Cactus Code.
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
</p>
<h1 class="partHead"><span class="titlemark">Part A<br /></span><a 
 id="x1-1000A"></a>1</h1>
<!--l. 10--><p class="noindent" >
                                                                                       
                                                                                       
</p><!--l. 10--><p class="noindent" >\(Revision\)
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter A1</span><br /><a 
 id="x1-2000A1"></a>Philosophy</h2>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 17--><p class="noindent" >Portable
     </p></li>
     <li class="itemize">
     <!--l. 19--><p class="noindent" >Extensable
     </p></li>
     <li class="itemize">
     <!--l. 21--><p class="noindent" >Modular</p></li></ul>
                                                                                       
                                                                                       
<h2 class="chapterHead"><span class="titlemark">Chapter A2</span><br /><a 
 id="x1-3000A2"></a>Coding Style</h2>
<!--l. 26--><p class="noindent" >The flesh has been written with the following coding guidelines; all <span 
class="cmtt-10">Cactus* </span>thorns should also follow
them.
</p>
<h3 class="sectionHead"><span class="titlemark">A2.1   </span> <a 
 id="x1-4000A2.1"></a>Indentation</h3>
<!--l. 32--><p class="noindent" >Two spaces, no tabs.
</p><!--l. 34--><p class="noindent" >Two spaces are enough to clearly indent, more would be a waste of space, less not really noticeable.
</p><!--l. 37--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">A2.2   </span> <a 
 id="x1-5000A2.2"></a>Brace positioning</h3>
<!--l. 39--><p class="noindent" >Each opening brace should appear on a line by itself, aligned with the preceeding statement.
</p><!--l. 42--><p class="noindent" >Closing braces should line up with the corresponding opening brace, and should be on lines by themselves apart
from the <span 
class="cmtt-10">while </span>in a
                                                                                       
                                                                                       
</p>
<pre class="verbatim" id="verbatim-1">
do
{

...

} while(...);

</pre>
<!--l. 54--><p class="nopar" > statement.
</p><!--l. 58--><p class="noindent" >This brace positioning stategy makes it easy to run ones eye from a closing or opening brace to its matching
opening or closing brace.
</p><!--l. 61--><p class="noindent" >Braces should be used for all <span 
class="cmtt-10">if </span>and <span 
class="cmtt-10">for </span>statements.
</p><!--l. 63--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">A2.3   </span> <a 
 id="x1-6000A2.3"></a>GRDOC</h3>
<!--l. 65--><p class="noindent" >All files should start with a grdoc header, and all functions should have grdoc headers.
</p><!--l. 68--><p class="noindent" >The file grdoc should contain a description of the contents of the file and a version with the CVS <span 
class="tcrm-1000">$</span>Header<span 
class="tcrm-1000">$</span>
tag.
</p><!--l. 71--><p class="noindent" >The function grdoc should contain
</p>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 75--><p class="noindent" >a description of the function, saying what it does.
     </p></li>
     <li class="itemize">
     <!--l. 77--><p class="noindent" >the functions called by this function.
     </p></li>
     <li class="itemize">
     <!--l. 79--><p class="noindent" >all function arguments with descriptions of what they are and what they are used for.
                                                                                       
                                                                                       
     </p></li>
     <li class="itemize">
     <!--l. 82--><p class="noindent" >the return codes should be described.</p></li></ul>
<!--l. 85--><p class="noindent" >Note that the ‘calledby’ field <span 
class="cmti-10">should not </span>be filled in as this is unmaintainable.
</p><!--l. 88--><p class="noindent" >The standard grdoc function header is of the form
                                                                                       
                                                                                       
</p>
<pre class="verbatim" id="verbatim-2">
 /*@@
   @routine    Template
   @date       Fri Oct  6 10:51:49 2000
   @author     Tom Goodale
   @desc
   An example of grdoc
   @enddesc
   @calls     templatefunc2
   @calledby
   @history

   @endhistory
   @var     templatestring
   @vdesc   string describing foobar
   @vtype   const char *
   @vio     in
   @vcomment

   @endvar

   @returntype int *
   @returndesc
   0 - success
   or the returncode of @seeroutine templatefunc2
   @endreturndesc
@@*/
</pre>
<!--l. 117--><p class="nopar" >
</p><!--l. 119--><p class="noindent" >This is the form which will be created if you use the grdoc emacs mode. The variable descriptions and
the return code decription should be placed after the history so that they are close to the actual
function.
</p><!--l. 123--><p class="noindent" >After the first actual release the history should be filled in with each change.
</p><!--l. 126--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">A2.4   </span> <a 
 id="x1-7000A2.4"></a>Header Files</h3>
<!--l. 128--><p class="noindent" >Header files should not include any system header file, but should contain in the initial comment a list of system
header files which are assumed to have been included before this file is included.
                                                                                       
                                                                                       
</p><!--l. 132--><p class="noindent" >The body of a header should be protected against multiple inclusion by lines of the form
                                                                                       
                                                                                       
</p>
<pre class="verbatim" id="verbatim-3">
#ifndef _NAMEOFHEADERFILEINCAPITALS_H_
#define _NAMEOFHEADERFILEINCAPITALS_H_ 1

...body of header file...

#endif /* _NAMEOFHEADERFILEINCAPITALS_H_ */

</pre>
<!--l. 143--><p class="nopar" >
</p><!--l. 145--><p class="noindent" >Function prototypes in header files should be protected against C++ linkage by
                                                                                       
                                                                                       
</p>
<pre class="verbatim" id="verbatim-4">
#ifdef __cplusplus
extern &#x0022;C&#x0022;
{
#endif

...prototypes...

#ifdef __cplusplus
}
#endif
</pre>
<!--l. 159--><p class="nopar" >
</p><!--l. 161--><p class="noindent" >The Cactus header files (<span 
class="cmtt-10">cctk</span><span 
class="cmtt-10">_&#x003C;name&#x003E;</span>) should only include information relevant for thorn programmers.
</p><!--l. 164--><p class="noindent" >There is a template file in the doc/MaintGuide directory.
</p><!--l. 166--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">A2.5   </span> <a 
 id="x1-8000A2.5"></a>Source Files</h3>
<!--l. 168--><p class="noindent" >Source files should have as their first lines after all the include files:
</p><!--l. 173--><p class="noindent" ><span 
class="cmbx-10">static const char</span> \(*\) <span 
class="cmbx-10">const rcsid = ”</span><span 
class="tcbx-1000">$</span><span 
class="cmbx-10">Header</span><span 
class="tcbx-1000">$</span><span 
class="cmbx-10">”;  </span><br 
class="newline" /><span 
class="cmbx-10">CCTK</span><span 
class="cmbx-10">_FILEVERSION(</span>\(&lt;\)<span 
class="cmbx-10">source file</span>\(&gt;\)<span 
class="cmbx-10">);</span>
</p><!--l. 178--><p class="noindent" >or the expanded rcs version of this. The macro <span 
class="cmbx-10">CCTK</span><span 
class="cmbx-10">_FILEVERSION </span>is simply there to prevent compiler
warnings, and \(&lt;\)<span 
class="cmbx-10">source file</span>\(&gt;\) should be replaced by </p>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 183--><p class="noindent" > Flesh: \(&lt;\)<span 
class="cmbx-10">directory</span>\(&gt;\)<span 
class="cmbx-10">_</span>\(&lt;\)<span 
class="cmbx-10">core filename</span>\(&gt;\)<span 
class="cmbx-10">_</span>\(&lt;\)<span 
class="cmbx-10">extension</span>\(&gt;\) (e.g. <span 
class="cmbx-10">main</span><span 
class="cmbx-10">_Groups</span><span 
class="cmbx-10">_c</span>)
     </p></li>
     <li class="itemize">
     <!--l. 185--><p class="noindent" > Thorn: \(&lt;\)<span 
class="cmbx-10">arrangement</span>\(&gt;\)<span 
class="cmbx-10">_</span>\(&lt;\)<span 
class="cmbx-10">thorn</span>\(&gt;\)<span 
class="cmbx-10">_</span>\(&lt;\)<span 
class="cmbx-10">core filename</span>\(&gt;\)<span 
class="cmbx-10">_</span>\(&lt;\)<span 
class="cmbx-10">extension</span>\(&gt;\)<br 
class="newline" />(e.g. <span 
class="cmbx-10">CactusBase</span><span 
class="cmbx-10">_CartGrid3D</span><span 
class="cmbx-10">_CartGrid3D</span><span 
class="cmbx-10">_c</span>)
</p>
     </li></ul>
                                                                                       
                                                                                       
<!--l. 189--><p class="noindent" >Globally visable functions should appear before local functions.
</p><!--l. 192--><p class="noindent" >(NOTE: currently the schedule stuff is a good example of what I’m coming to like as a style, e.g.
src/main/ScheduleInterface.c )
</p><!--l. 196--><p class="noindent" >There is a template file in the doc/MaintGuide directory.
</p><!--l. 198--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">A2.6   </span> <a 
 id="x1-9000A2.6"></a>Naming Conventions</h3>
<!--l. 200--><p class="noindent" >All functions which may be used by thorns should have names beginning with <span 
class="cmtt-10">CCTK</span><span 
class="cmtt-10">_ </span>and then capitalised words
with no underscores.
</p><!--l. 203--><p class="noindent" >All functions used internally by the flesh should have names beginning with <span 
class="cmtt-10">CCTKi</span><span 
class="cmtt-10">_ </span>and then capitalised words
with no underscores.
</p><!--l. 206--><p class="noindent" >Header files to be included by thorns should have names beginning with <span 
class="cmtt-10">cctk</span><span 
class="cmtt-10">_</span>, and followed by capitalised
words with no underscores.
</p><!--l. 209--><p class="noindent" >Structures which may be used by thorns should have names beginning with <span 
class="cmtt-10">c </span>and then capitalised words, <span 
class="cmti-10">e.g.</span>
<span 
class="cmtt-10">cGroup</span>. The exception here is structures associated with utility routines which are not Cactus specific, there the
structure names should start with a <span 
class="cmtt-10">t</span><span 
class="cmtt-10">_</span>.
</p><!--l. 215--><p class="noindent" >Structures which are purely internal to the flesh should have names beginning with <span 
class="cmtt-10">i</span>.
</p><!--l. 218--><p class="noindent" >All Cactus sourcefile names (except general utility files) should use capitilised words without underscores.
</p><!--l. 221--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">A2.7   </span> <a 
 id="x1-10000A2.7"></a>Functions</h3>
<!--l. 223--><p class="noindent" >All functions should have a grdoc header.
</p><!--l. 225--><p class="noindent" >They should have a single place of return at the end of the function to make it easy to tidy up and work out
what is going on.
</p><!--l. 228--><p class="noindent" >Where possible variables should be declared at the top of the function with no initialisation, and then initialised
after all variable declarations. Of course this can’t apply to static variables, ’though these should be kept to a
minimum so we can make a thread-safe version of Cactus later.
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
</p>
<h1 class="partHead"><span class="titlemark">Part B<br /></span><a 
 id="x1-11000B"></a>2</h1>
<!--l. 11--><p class="noindent" >
                                                                                       
                                                                                       
</p><!--l. 11--><p class="noindent" >\(Revision\)
</p><!--l. 14--><p class="noindent" >Note that this whole Chapter is out-dated and needs a rewrite.
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter B1</span><br /><a 
 id="x1-12000B1"></a>Use of git</h2>
<!--l. 20--><p class="noindent" >Version control in Cactus is maintained by the use of the git software. This software allows one to trace any
change to a file from the creation of a file to the present version, and provides an automatic notification system
to alert interested parties of changes to files. In order to make effective use of the system, the following commit
procedure is recommended as a guideline
                  </p><dl class="list1"><dt class="list">
<span 
class="cmssi-10">Only make one change at a time</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 28--><p class="noindent" >Don’t make a commit which changes several distinct things at once, as it is difficult
                  then for people tracing changes back to distinguish which bit was changed for which
                  reason. See the note on commit messages below.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Run the test suite</span>    </dt><dd 
class="list">
                  <!--l. 33--><p class="noindent" >This makes sure the code compiles, runs, and produces the correct results.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Know which files you are going to commit</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 35--><p class="noindent" >Always check what you are about to commit by use of the
                  </p><!--l. 38--><p class="noindent" ><span 
class="cmtt-10">git status</span>
                  </p><!--l. 40--><p class="noindent" >command. This ensures that you know which files have been modified, which files
                  have been removed and which files have been added, and provides a useful reminder
                  to use the <span class="obeylines-h"><code class="verb">git add</code></span> and <span class="obeylines-h"><code class="verb">git rm</code></span> commands.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Know what has changed</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 44--><p class="noindent" >The use of the
                  </p><!--l. 47--><p class="noindent" ><span 
class="cmtt-10">git diff</span>
                  </p><!--l. 49--><p class="noindent" >command or
                  </p><!--l. 51--><p class="noindent" ><span 
class="cmtt-10">git add --patch</span>
                  </p><!--l. 53--><p class="noindent" >is a good check that you are not just committing an accidental keystroke or a debug
                  statement. Moreover it is a good reminder of what has changed and needs to be
                  mentioned in the commit message.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Provide clear and meaningful and relevant commit messages</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 57--><p class="noindent" >The commit message should explain what has changed and why, for details people
                  can use <span class="obeylines-h"><code class="verb">git diff</code></span>, however the commit message should be clear enough for people
                  to have a good idea of what is going on. This is strongly coupled to the item about
                  making only one change listed above - if two distinct things have been changed,
                  they should be committed separately, with relevant commit messages. If the change
                  resulted from a <span 
class="cmtt-10">Problem Report </span>(PR) the PR number should be noted in the
                  commit message.</p></dd></dl>
                                                                                       
                                                                                       
<h2 class="chapterHead"><span class="titlemark">Chapter B2</span><br /><a 
 id="x1-13000B2"></a>Use of the Issue Tracker</h2>
<!--l. 72--><p class="noindent" >Bug tracking in Cactus is maintained by use of the bitbucket platform. This software provides audit trails of the
status and all correspondence concerning any problem report (PR). Each problem is given a unique number and
assigned a responsible person.
                  </p><dl class="list1"><dt class="list">
<span 
class="cmssi-10">Correspondence</span>      </dt><dd 
class="list">
                  <!--l. 78--><p class="noindent" >All correspondence with the author of the PR should be copied to the bitbucket
                  ticket. This ensures that the correspondence is entered into the audit trail.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Responsiblity</span>        </dt><dd 
class="list">
                  <!--l. 82--><p class="noindent" >When a PR comes in, it is assigned a responsible person. If another person wishes to
                  tackle the problem they should check with the responsible person, and then assign
                  themselves as the responsible person.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Initial auditing</span>       </dt><dd 
class="list">
                  <!--l. 87--><p class="noindent" >The responsible person should review the PR and check that the user supplied fields
                  are sensible. In particular the <span 
class="cmtt-10">Synopsis </span>should be an accurate reflection of the
                  problem, and the <span 
class="cmtt-10">Priority </span>and <span 
class="cmtt-10">Severity </span>fields should be set to the correct levels.
                  If the <span 
class="cmtt-10">Release </span>field is badly filled out, attempts should be made to determine the
                  relase version used by the PR submitter. If it is a duplicate of a previous PR it
                  should be marked as <span 
class="cmtt-10">Duplicate</span>.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Analysing the PR</span>    </dt><dd 
class="list">
                  <!--l. 95--><p class="noindent" >Once the responsible person has had a chance to review the PR, they should either
                  seek further information from the submitter and mark the PR state as <span 
class="cmtt-10">Feedback</span>,
                  or they should seek to determine the cause of the problem and mark it as <span 
class="cmtt-10">Analysed</span>.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Closing a PR</span>        </dt><dd 
class="list">
                  <!--l. 100--><p class="noindent" >Once a problem is fixed, the PR state should be changed to the current version
                  number of Cactus. The <span 
class="cmtt-10">Fix </span>field should be filled out with what was done, and
                  <span 
class="cmtt-10">git </span>hash for the change should be noted. Any miscellaneous comments about the
                  problem should be noted in the <span 
class="cmtt-10">Release-Note </span>field.</p></dd></dl>
                                                                                       
                                                                                       
<h2 class="chapterHead"><span class="titlemark">Chapter B3</span><br /><a 
 id="x1-14000B3"></a>Release procedure</h2>
<!--l. 112--><p class="noindent" >In the release cycle, Cactus is maintained in two git branches - the ‘stable’ <span class="obeylines-h"><code class="verb">Cactus_XXX</code></span> and the development
<span class="obeylines-h"><code class="verb">master</code></span> branches. The stable version is the last release and no non-reviewed commits should ever be made to it -
it is for people who do not want to worry about things breaking from day to day. The development version is the
tree used for developing the next release.
</p><!--l. 120--><p class="noindent" >Making a release consists of creating a new release branch from the master branch. The following procedure is
used:
                  </p><dl class="list1"><dt class="list">
<span 
class="cmssi-10">Notify committers of start of release procedure</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 124--><p class="noindent" >This ensures that no commits are made during the following procedure. If it is
                  impossible, for some reason, to notify a person of the start of the procedure, that
                  person’s commit rights should be revoked during the procedure to prevent accidents.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Check the code on all supported architectures</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 129--><p class="noindent" >The code should be checked out (in a fresh place), compiled and the test-suites run
                  on all suppported architectures. Problems found should be fixed or noted in the
                  release notes. This is an iterative procedure, as any commits made to fix problems
                  need to be checked on all other architectures.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Check example parameter files</span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 135--><p class="noindent" >The example parameter files in thorn <span 
class="cmti-10">par </span>directories should be run and updated for
                  any additional or changed thorns or parameters.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Update ReleaseNotes</span> </dt><dd 
class="list">
                  <!--l. 138--><p class="noindent" >The release notes should be added to the <span class="obeylines-h"><code class="verb">doc/ReleaseNotes</code></span> file.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Tag the code</span>        </dt><dd 
class="list">
                  <!--l. 140--><p class="noindent" >Tag the code with the latest release tag and update the <span 
class="cmtt-10">LATEST </span>and <span 
class="cmtt-10">STABLE </span>tags. The
                  easiest way to do this is from a clean checkout.
                                                                                       
                                                                                       
</p>
                  <pre class="verbatim" id="verbatim-5">
                  git tag Cactus_4_0_Beta_X_v0
</pre>
                  <!--l. 146--><p class="nopar" >
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Notify people</span>       </dt><dd 
class="list">
                  <!--l. 148--><p class="noindent" >The relase notes should be sent out to the cactus mailing lists and any other relevant
                  places such as linux-announce and Freshmeat.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Update web page</span>    </dt><dd 
class="list">
                  <!--l. 151--><p class="noindent" >The release should be noted in the news section of the web page. Most information such as
                  generating documentation takes place automatically for the web pages, the only thing
                  which needs to be done manually is to checkout any new arrangements in
                  the Stable Release in the relevent directories in the <span 
class="cmtt-10">CheckOut </span>directory as
                  <span 
class="cmtt-10">cactus</span><span 
class="cmtt-10">_web</span>.
                  </p></dd><dt class="list">
<span 
class="cmssi-10">Close PRs</span>          </dt><dd 
class="list">
                  <!--l. 157--><p class="noindent" >Any problem reports which were closed in the beta relase should be audited
                  for correct entries in the <span 
class="cmtt-10">Fix </span>field and then their state should be marked as
                  <span 
class="cmtt-10">closed</span>.</p></dd></dl>
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
<h1 class="partHead"><span class="titlemark">Part C<br /></span><a 
 id="x1-15000C"></a>3</h1>
<!--l. 11--><p class="noindent" >
                                                                                       
                                                                                       
</p><!--l. 11--><p class="noindent" >\(Revision\)
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter C1</span><br /><a 
 id="x1-16000C1"></a>Introduction</h2>
<!--l. 16--><p class="noindent" >The make system has several design criteria:
</p>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 20--><p class="noindent" >Must be able to build the code on all supported platforms.
     </p></li>
     <li class="itemize">
     <!--l. 22--><p class="noindent" >Must allow object files and executables for different architectures to co-exist without conflicts.
     </p></li>
     <li class="itemize">
     <!--l. 24--><p class="noindent" > Must allow object files and exectutables for different compiler options to co-exist without conflict.
     </p></li>
     <li class="itemize">
     <!--l. 27--><p class="noindent" > Must allow object files and executables for different thornsets to co-exist without conflicts.
     </p></li>
     <li class="itemize">
     <!--l. 30--><p class="noindent" > Thorn-writers must be able to easily add and remove files from their thorns without having to edit
     files provided by the flesh or other thorns.
     </p></li>
     <li class="itemize">
     <!--l. 33--><p class="noindent" > Thorn-writers must be able to control the compilation options and dependencies of their own
     thorns.</p></li></ul>
<!--l. 38--><p class="noindent" >The first criterion is achieved by standarising to the use of the freely available GNU make programme, which is
available on all platforms, and the use of <span 
class="cmti-10">Autoconf </span>to detect the specific features of the particular machine the
user is compiling on.
</p><!--l. 43--><p class="noindent" >The next three criteria are achieved by the introduction of <span 
class="cmti-10">configurations </span>which contain all the
information and object files associated with a particular combination of machine, compilation options and
thorns.
</p><!--l. 47--><p class="noindent" >The final criteria are achieved by allowing the thorn-writer to specify their files and options in configuration files
readable by the GNU make program, or by specifying their own make file.
</p>
<h3 class="sectionHead"><span class="titlemark">C1.1   </span> <a 
 id="x1-17000C1.1"></a>Note on philosophy of the make system</h3>
<!--l. 53--><p class="noindent" >Make options can be divided into two classes.
</p>
                                                                                       
                                                                                       
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 56--><p class="noindent" >Configuration-time  options  Things  which  have  an  effect  on  the  resulting  executable.  E.g.
     optimisation or debugging options.
     </p></li>
     <li class="itemize">
     <!--l. 59--><p class="noindent" >Make-time options Things which don’t effect the final executable. E.g. warning-flags, flags to make
     in parallel.</p></li></ul>
<!--l. 64--><p class="noindent" >Whenever an option is added to the make system care should be taken to preserve this distinction. It should be
possible to go to the <span 
class="cmti-10">config-data </span>directory of a configuration and examine the files there to determine
how an executable was built. It should not be necessary to know the command-line used to build
it.
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter C2</span><br /><a 
 id="x1-18000C2"></a>Make files</h2>
<h3 class="sectionHead"><span class="titlemark">C2.1   </span> <a 
 id="x1-19000C2.1"></a>Makefile</h3>
<!--l. 78--><p class="noindent" >This is the master makefile.
</p><!--l. 80--><p class="noindent" >In normal operation it calls <span 
class="cmti-10">make.configuration </span>with the -j TJOBS flag to build TJOBS thorns in
parallel.
</p><!--l. 83--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">C2.2   </span> <a 
 id="x1-20000C2.2"></a>lib/make/make.configuration</h3>
<!--l. 86--><p class="noindent" >This is the makefile which actually builds a configuration.
</p><!--l. 88--><p class="noindent" >All built objects for a configuration go into a subdirectory called <span 
class="cmti-10">build </span>of the configuration.
</p><!--l. 91--><p class="noindent" >For each thorn listed in the <span 
class="cmti-10">make.thornlist </span>file generated by the <span 
class="cmti-10">CST </span>it runs <span 
class="cmti-10">make.thornlib </span>or a file called
<span 
class="cmti-10">makefile </span>in the thorn’s own source directory to generate a library for that thorn. Before running the sub-makefile
it changes directory to a subdirectory of the <span 
class="cmti-10">build </span>directory with the same name as the thorn and
sets
</p>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 98--><p class="noindent" >TOP The CCTK top-level directory.
     </p></li>
     <li class="itemize">
     <!--l. 100--><p class="noindent" >SRCDIR The thorn’s source directory.
     </p></li>
     <li class="itemize">
     <!--l. 102--><p class="noindent" >CONFIG The <span 
class="cmti-10">config </span>subdirectory of the configuration.
     </p></li>
     <li class="itemize">
     <!--l. 104--><p class="noindent" >NAME The name of the library which should be created for the thorn (including directory info).
     </p></li>
     <li class="itemize">
     <!--l. 107--><p class="noindent" >THORN The name of the thorn.</p></li></ul>
                                                                                       
                                                                                       
<!--l. 111--><p class="noindent" >The sub-makefile is passed the -j FJOBS flag to build FJOBS files in parallel.
</p><!--l. 113--><p class="noindent" >If <span 
class="cmti-10">make.thornlist </span>doesn’t exist, it runs the <span 
class="cmti-10">CST </span>to generate it from the <span 
class="cmti-10">ThornList </span>file.
</p><!--l. 116--><p class="noindent" >If <span 
class="cmti-10">ThornList </span>doesn’t exist, it generates a list of thorns in the <span 
class="cmti-10">arrangements </span>and then gives the user the option to
edit the list.
</p><!--l. 120--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">C2.3   </span> <a 
 id="x1-21000C2.3"></a>lib/make/make.thornlib</h3>
<!--l. 123--><p class="noindent" >This makefile is responsible for producing a library from the contents of a thorn’s source directory.
</p><!--l. 126--><p class="noindent" >In each source directory of a thorn the author may put two files.
</p>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 129--><p class="noindent" >make.code.defn This should contain a line
                                                                                       
                                                                                       
</p>
     <pre class="verbatim" id="verbatim-6">
     SRCS =
</pre>
     <!--l. 133--><p class="nopar" > which lists the names of source files <span 
class="cmti-10">in that directory</span>.
     </p></li>
     <li class="itemize">
     <!--l. 135--><p class="noindent" >make.code.deps This is an optional file which gives standard make dependency rules for the files in that
     directory.</p></li></ul>
<!--l. 140--><p class="noindent" >In addition the thorn’s top-level <span 
class="cmti-10">make.code.defn </span>file can contain a line
                                                                                       
                                                                                       
</p>
<pre class="verbatim" id="verbatim-7">
SUBDIRS =
</pre>
<!--l. 144--><p class="nopar" >
</p><!--l. 146--><p class="noindent" >which lists <span 
class="cmti-10">all </span>subdirectories of the thorn’s <span 
class="cmti-10">src </span>directory which contain files to be compiled.
</p><!--l. 149--><p class="noindent" >To process the subdirectories the makefile runs the sub-makefile <span 
class="cmti-10">make.subdir </span>in each subdirectory.
</p><!--l. 152--><p class="noindent" >Once that is done it compiles files in the <span 
class="cmti-10">src </span>directory and then all the object files into a library which is named
by the <span 
class="cmti-10">NAME </span>make-variable.
</p><!--l. 155--><p class="noindent" >All object files are compiled by the rules given in <span 
class="cmti-10">make.config.rules</span>.
</p><!--l. 157--><p class="noindent" >Since the make language doesn’t contain looping constructions it is a bit tricky to construct the full list of object
files. To do this the makefile uses the GNU make <span 
class="cmti-10">foreach </span>function to include all the subdirectory <span 
class="cmti-10">make.code.defn</span>
files, along with two auxiliary files <span 
class="cmti-10">make.pre </span>and <span 
class="cmti-10">make.post </span>which are included respectively before and after each
<span 
class="cmti-10">make.code.defn </span>file. These auxiliary files allow the <span 
class="cmti-10">SRCS </span>variables set in the <span 
class="cmti-10">make.code.defn </span>files to be
concatanated onto one make variable <span 
class="cmti-10">CCTK</span><span 
class="cmti-10">_SRCS</span>.
</p><!--l. 166--><p class="noindent" >Extensive use is made of the two different flavours of variable (simply-expanded and recursively-expanded)
available within GNU make.
</p><!--l. 169--><p class="noindent" >The GNU ‘-include’ construct is used to suppress warnings when an optional file is not available.
</p><!--l. 172--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">C2.4   </span> <a 
 id="x1-22000C2.4"></a>lib/make/make.subdir</h3>
<!--l. 175--><p class="noindent" >This builds all the object files for a specific subdirectory according to the list of files provided by the
<span 
class="cmti-10">make.code.defn </span>file in that subdirectory. Extra dependencies can be provided for these files by the presence of the
optional file <span 
class="cmti-10">make.code.deps </span>in the directory.
</p><!--l. 181--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">C2.5   </span> <a 
 id="x1-23000C2.5"></a>lib/make/make.pre and lib/make/make.post</h3>
<!--l. 184--><p class="noindent" >These are auxiliary files used to construct the full list of source files for a particular thorn.
                                                                                       
                                                                                       
</p><!--l. 187--><p class="noindent" ><span 
class="cmti-10">make.pre </span>resets the <span 
class="cmti-10">SRCS </span>variable to an empty value. <span 
class="cmti-10">make.post </span>adds the name of the subdirectory onto all
filenames in the <span 
class="cmti-10">SRCS </span>variable and adds the resulting list to the <span 
class="cmti-10">CCTK</span><span 
class="cmti-10">_SRCS </span>make variable.
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter C3</span><br /><a 
 id="x1-24000C3"></a>Autoconf stuff</h2>
<!--l. 196--><p class="noindent" >GNU autoconf is a program designed to detect the features available on a particular platform.
It can be used to determine the compilers available on a platform, what the CPU and operating
system are, what flags the compilers take, and as many other things as m4 macros can be written to
cover.
</p><!--l. 202--><p class="noindent" >Autoconf is configured by a file <span 
class="cmti-10">configure.in </span>which autoconf turns into a file called <span 
class="cmti-10">configure </span>(which should never
be editted by hand). The cactus configuration includes the resulting <span 
class="cmti-10">configure </span>file and this should not need to be
regenerated by other than flesh-maintainers.
</p><!--l. 208--><p class="noindent" >When the <span 
class="cmti-10">configure </span>script is run it takes the files <span 
class="cmti-10">config.h.in</span>, <span 
class="cmti-10">make.config.defn.in</span>, <span 
class="cmti-10">make.config.rules.in</span>, and
<span 
class="cmti-10">make.config.deps.in </span>and generates new files in the configuration’s <span 
class="cmti-10">config-data </span>subdirectory with the same names
with the <span 
class="cmti-10">.in </span>stripped off. The configure script replaces certain parts of these files with the values it has detected
for this architecture.
</p><!--l. 215--><p class="noindent" >In addition <span 
class="cmti-10">configure </span>runs the <span 
class="cmti-10">configure.pl </span>perl script to do things which can only be done easily by
perl.
</p>
<h3 class="sectionHead"><span class="titlemark">C3.1   </span> <a 
 id="x1-25000C3.1"></a>configure.in</h3>
<!--l. 221--><p class="noindent" >This and the macro-definition file <span 
class="cmti-10">aclocal.m4 </span>are the sources for the <span 
class="cmti-10">configure </span>script. Autoconf should be run in
this directory if either of these files is editted.
</p><!--l. 225--><p class="noindent" >Once the script has determined the host architecture, it checks the <span 
class="cmti-10">known-architecture </span>directory for any preferred
compilers. By default autoconf macros will choose GNU CC if it is available, however for some architectures this
may not be desirable.
</p><!--l. 231--><p class="noindent" >It then proceeds to determine the available compilers and auxiliary programs if they haven’t alrady been
specified in an environment variable or in the <span 
class="cmti-10">known-architecture </span>file for this architecture.
</p><!--l. 235--><p class="noindent" >Once the set of programs to be used has been detected or chosen, the known-architecture files are again
checked for specific features which would otherwise require the writing of complicated macros to
detect. (Remember that the goal is that people don’t need to write autoconf macros or run autoconf
themselves.)
</p><!--l. 241--><p class="noindent" >Once that is done it looks at each subdirectory of the <span 
class="cmti-10">extras </span>directory for packages which have their own
configuration process. If a subdirectory has an exectubale file called <span 
class="cmti-10">setup.sh </span>this is called.
</p><!--l. 245--><p class="noindent" >The rest of the script is concerned with detecting various header files, sizes of various types, and of setting
defaults for things which haven’t been set by the <span 
class="cmti-10">known-architecture </span>file.
</p><!--l. 249--><p class="noindent" >
</p>
                                                                                       
                                                                                       
<h3 class="sectionHead"><span class="titlemark">C3.2   </span> <a 
 id="x1-26000C3.2"></a>config.h.in</h3>
<!--l. 252--><p class="noindent" >This file is turned into <span 
class="cmti-10">config.h </span>in the <span 
class="cmti-10">config-data </span>directory in the configuration.
</p><!--l. 255--><p class="noindent" >It contains C preprocessor macros which define various features or configuration options.
</p><!--l. 258--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">C3.3   </span> <a 
 id="x1-27000C3.3"></a>make.config.defn.in</h3>
<!--l. 261--><p class="noindent" >This file is turned into <span 
class="cmti-10">make.config.defn </span>in the <span 
class="cmti-10">config-data </span>directory in the configuration.
</p><!--l. 264--><p class="noindent" >It contains make macros needed to define or build the particular configuration.
</p><!--l. 267--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">C3.4   </span> <a 
 id="x1-28000C3.4"></a>make.config.rules.in</h3>
<!--l. 270--><p class="noindent" >This file is turned into <span 
class="cmti-10">make.config.rules </span>in the <span 
class="cmti-10">config-data </span>directory in the configuration.
</p><!--l. 273--><p class="noindent" >It contains the rules needed to create an object file from a source file. Note that currently this isn’t modified by
the configuration process, as everything is controlled from variables in the <span 
class="cmti-10">make.config.defn </span>file. However this
situation may change in the future if really necessary.
</p><!--l. 278--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">C3.5   </span> <a 
 id="x1-29000C3.5"></a>make.config.deps.in</h3>
<!--l. 281--><p class="noindent" >This file is turned into <span 
class="cmti-10">make.config.deps </span>in the <span 
class="cmti-10">config-data </span>directory in the configuration.
</p><!--l. 284--><p class="noindent" >Currently this file is empty; it may gain content later if we need to use autoconf to generate dependency
stuff.
</p><!--l. 287--><p class="noindent" >
</p>
                                                                                       
                                                                                       
<h3 class="sectionHead"><span class="titlemark">C3.6   </span> <a 
 id="x1-30000C3.6"></a>aclocal.m4</h3>
<!--l. 290--><p class="noindent" >This contains m4 macros not distributed with autconf.
</p><!--l. 292--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">C3.7   </span> <a 
 id="x1-31000C3.7"></a>CCTK_functions.sh</h3>
<!--l. 295--><p class="noindent" >This contains Bourne-shell functions which can be used by the configure script, or by stuff in the <span 
class="cmti-10">extras </span>or
<span 
class="cmti-10">known-architrectures </span>subdirectories.
</p><!--l. 299--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">C3.7.1   </span> <a 
 id="x1-32000C3.7.1"></a>CCTK_Search</h4>
<!--l. 301--><p class="noindent" >This can be used to search a set of directories for a specific file or files and then set a variable as a
result.
</p><!--l. 304--><p class="noindent" >Usage: CCTK_Search \(&lt;\)variable\(&gt;\) \(&lt;\)subdirectories to search\(&gt;\) \(&lt;\)what to search for\(&gt;\) [base directory]
</p><!--l. 306--><p class="noindent" >It will search each of the listed subdirectories of the base directory for the desired file or directory, and, if it’s
found, set the variable to the name of the subdirectory.
</p><!--l. 309--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">C3.7.2   </span> <a 
 id="x1-33000C3.7.2"></a>CCTK_CreateFile</h4>
<!--l. 311--><p class="noindent" >Creates a file with specific contents.
</p><!--l. 313--><p class="noindent" >Usage: CCTK_CreateFile \(&lt;\)filename\(&gt;\) \(&lt;\)content\(&gt;\)
</p><!--l. 315--><p class="noindent" >Note that this can only put one line in the file to begin with. Additional lines can be added with
<span 
class="cmti-10">CCTK</span><span 
class="cmti-10">_WriteLine</span>.
</p><!--l. 318--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">C3.7.3   </span> <a 
 id="x1-34000C3.7.3"></a>CCTK_WriteLine</h4>
                                                                                       
                                                                                       
<!--l. 320--><p class="noindent" >Write one line to a file.
</p><!--l. 322--><p class="noindent" >Usage: CCTK_WriteLine \(&lt;\)file\(&gt;\) \(&lt;\)line\(&gt;\)
</p><!--l. 324--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">C3.8   </span> <a 
 id="x1-35000C3.8"></a>known-architectures</h3>
<!--l. 327--><p class="noindent" >This contains files which tell autoconf about specific not-easily-detectable features about particular
architectures. Each file in this directory is named with the name held by the host_os autoconf
variable.
</p><!--l. 331--><p class="noindent" >Each file is called twice by the configure script. Once to determine the ‘preferred-compilers’ for that architecture,
and once for everything else.
</p><!--l. 335--><p class="noindent" >The first time is straight after the operating system is determined, and the variable <span 
class="cmti-10">CCTK</span><span 
class="cmti-10">_CONFIG</span><span 
class="cmti-10">_STAGE </span>is
set to ‘preferred-compilers’. It should only set the names of compilers, and not touch anything
else.
</p><!--l. 340--><p class="noindent" >The second time it is called is after the compilers and auxiliary programs have been detected or otherwise
chosen. <span 
class="cmti-10">CCTK</span><span 
class="cmti-10">_CONFIG</span><span 
class="cmti-10">_STAGE </span>is set to ‘misc’ in this case. This stage can be used to set compiler options
based upon the chosen compilers. The scripts are allowed to write (append) to <span 
class="cmti-10">cctk</span><span 
class="cmti-10">_archdefs.h </span>in this stage if it
needs to add to the C preprocessor macros included by the code. <span 
class="cmti-10">CCTK</span><span 
class="cmti-10">_WriteLine </span>can be used to write to the
file.
</p><!--l. 349--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">C3.9   </span> <a 
 id="x1-36000C3.9"></a>extras</h3>
<!--l. 352--><p class="noindent" >This directory is used to hold configuration programs for optional extra packages.
</p><!--l. 355--><p class="noindent" >If a subdirectory of this directory contains an executable file <span 
class="cmti-10">setup.sh</span>, this file is run.
</p><!--l. 358--><p class="noindent" >The two files <span 
class="cmti-10">cctk</span><span 
class="cmti-10">_extradefs.h </span>and make.extra.defn can be appended to, to add c preprocessor macros or
add/modify make variables respectively. <span 
class="cmti-10">CCTK</span><span 
class="cmti-10">_WriteLine </span>can be used to do this.
</p><!--l. 362--><p class="noindent" >Note that include directories should be added to <span 
class="cmti-10">SYS</span><span 
class="cmti-10">_INC</span><span 
class="cmti-10">_DIRS </span>and not directly to <span 
class="cmti-10">INC</span><span 
class="cmti-10">_DIRS</span>.
</p><!--l. 365--><p class="noindent" >
</p>
                                                                                       
                                                                                       
<h3 class="sectionHead"><span class="titlemark">C3.10   </span> <a 
 id="x1-37000C3.10"></a>config.sub and config.guess</h3>
<!--l. 368--><p class="noindent" >These files are provided in the autoconf distribution. They are used to determine the host operating system, cpu,
etc and put them into a canonical form.
</p><!--l. 372--><p class="noindent" >The files distributed with Cactus are slightly modified to allow recognition of the Cray T3E, to work
with the Portland compilers under Linux, and to not do something stupid with unrecognised HP
machines.
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter C4</span><br /><a 
 id="x1-38000C4"></a>Perl scripts</h2>
<!--l. 380--><p class="noindent" >Various perl scripts are used in the make system.
</p>
<h3 class="sectionHead"><span class="titlemark">C4.1   </span> <a 
 id="x1-39000C4.1"></a>setup_configuration.pl</h3>
<!--l. 385--><p class="noindent" >This is called by the top level makefile to create a new configuration or to modify an old one. It parses an
options file setting environment variables as specified in that file, and then runs the autoconf-generated configure
script.
</p><!--l. 390--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">C4.2   </span> <a 
 id="x1-40000C4.2"></a>configure.pl</h3>
<!--l. 393--><p class="noindent" >This file is called from the configure script to determine the way Fortran names are represented for the specified
Fortran compiler. It works out the names for subroutines/functions, and for common blocks, and writes a perl
script which can be used to convert a name to the appropriate form so C and Fortran can be linked
together.
</p><!--l. 399--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">C4.3   </span> <a 
 id="x1-41000C4.3"></a>new_thorn.pl</h3>
<!--l. 402--><p class="noindent" >This generates the skeleton for a new thorn.
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
</p>
<h1 class="partHead"><span class="titlemark">Part D<br /></span><a 
 id="x1-42000D"></a>4</h1>
<!--l. 11--><p class="noindent" >
                                                                                       
                                                                                       
</p><!--l. 11--><p class="noindent" >\(Revision\)
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter D1</span><br /><a 
 id="x1-43000D1"></a>Introduction</h2>
<!--l. 16--><p class="noindent" >The CST is really the glue which holds the code together. It takes the specifications which users have provided
in their <span 
class="cmti-10">.ccl </span>files and generates C header and source files which are used to tell the flesh about the
thorns.
</p><!--l. 21--><p class="noindent" >The processing is done in three stages. In the first stage the <span 
class="cmti-10">.ccl </span>files from each thorn in the <span 
class="cmti-10">ThornList </span>are parsed
and the data from them is stored internally in databases. In the second stage the data is cross-indexed
for consistency. Finally the files are written out into the <span 
class="cmti-10">bindings </span>directory in the configuration
directory.
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter D2</span><br /><a 
 id="x1-44000D2"></a>The Databases</h2>
                                                                                       
                                                                                       
<h2 class="chapterHead"><span class="titlemark">Chapter D3</span><br /><a 
 id="x1-45000D3"></a>The Generated Files</h2>
                                                                                       
                                                                                       
<h2 class="chapterHead"><span class="titlemark">Chapter D4</span><br /><a 
 id="x1-46000D4"></a>The Parsing Routines</h2>
                                                                                       
                                                                                       
<h2 class="chapterHead"><span class="titlemark">Chapter D5</span><br /><a 
 id="x1-47000D5"></a>The Output Routines</h2>
                                                                                       
                                                                                       
<h2 class="chapterHead"><span class="titlemark">Chapter D6</span><br /><a 
 id="x1-48000D6"></a>Miscellaneous Routines</h2>
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
<h1 class="partHead"><span class="titlemark">Part E<br /></span><a 
 id="x1-49000E"></a>5</h1>
<!--l. 11--><p class="noindent" >
                                                                                       
                                                                                       
</p><!--l. 11--><p class="noindent" >\(Revision\)
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter E1</span><br /><a 
 id="x1-50000E1"></a>Introduction</h2>
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
<h1 class="partHead"><span class="titlemark">Part F<br /></span><a 
 id="x1-51000F"></a>6</h1>
<!--l. 11--><p class="noindent" >
                                                                                       
                                                                                       
</p><!--l. 11--><p class="noindent" >\(Revision\)
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter F1</span><br /><a 
 id="x1-52000F1"></a>Introduction</h2>
<!--l. 16--><p class="noindent" >The Comm subdirectory contains the routines which deal with communication issues.
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
</p>
<h1 class="partHead"><span class="titlemark">Part G<br /></span><a 
 id="x1-53000G"></a>7</h1>
<!--l. 11--><p class="noindent" >
                                                                                       
                                                                                       
</p><!--l. 11--><p class="noindent" >\(Revision\)
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter G1</span><br /><a 
 id="x1-54000G1"></a>Introduction</h2>
<!--l. 16--><p class="noindent" >The IO subdirectory contains the routines which deal with IO methods.
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
</p>
<h1 class="partHead"><span class="titlemark">Part H<br /></span><a 
 id="x1-55000H"></a>8</h1>
<!--l. 11--><p class="noindent" >
                                                                                       
                                                                                       
</p><!--l. 11--><p class="noindent" >\(Revision\)
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter H1</span><br /><a 
 id="x1-56000H1"></a>Introduction</h2>
<!--l. 16--><p class="noindent" >The utils subdirectory contains miscelleanous utilities which are in principle independent of the rest of
Cactus.
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
</p>
<h1 class="partHead"><span class="titlemark">Part I<br /></span><a 
 id="x1-57000I"></a>9</h1>
<!--l. 11--><p class="noindent" >
                                                                                       
                                                                                       
</p><!--l. 11--><p class="noindent" >\(Revision\)
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter I1</span><br /><a 
 id="x1-58000I1"></a>Introduction</h2>
<!--l. 16--><p class="noindent" >The schedule system is used to determine the order of executaion of user-supplied subroutines as scheduled by
thorns in their <span 
class="cmti-10">schedule.ccl</span>.
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter I2</span><br /><a 
 id="x1-59000I2"></a>Design and algorithms</h2>
                                                                                       
                                                                                       
<h2 class="chapterHead"><span class="titlemark">Chapter I3</span><br /><a 
 id="x1-60000I3"></a>Implementation</h2>
                                                                                       
                                                                                       
<h2 class="chapterHead"><span class="titlemark">Chapter I4</span><br /><a 
 id="x1-61000I4"></a>Summary of Interfaces</h2>
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
<h1 class="partHead"><span class="titlemark">Part J<br /></span><a 
 id="x1-62000J"></a>10</h1>
<!--l. 11--><p class="noindent" >
                                                                                       
                                                                                       
</p><!--l. 11--><p class="noindent" >\(Revision\)
                                                                                       
                                                                                       
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter J1</span><br /><a 
 id="x1-63000J1"></a>XEmacs customisation</h2>
<!--l. 16--><p class="noindent" >Here’s the relevent section from my .emacs file for the coding guidelines
                                                                                       
                                                                                       
</p>
<pre class="verbatim" id="verbatim-8">
(require ’grdoc)

; C-mode customisation

(defun my-c-mode-common-hook ()
  ;; my customizations for all of c-mode, c++-mode, objc-mode, java-mode
  (c-set-offset ’substatement-open 0)
  (c-set-offset ’case-label ’+)
  ;; other customizations can go here
  (turn-on-grdoc-mode)
  (font-lock-mode)
  (setq indent-tabs-mode nil)
  )
(add-hook ’c-mode-common-hook ’my-c-mode-common-hook)
</pre>
<!--l. 33--><p class="nopar" >
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
                                                                                       
</p>
 
</body></html> 

                                                                                       


